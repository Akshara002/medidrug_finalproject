{% extends 'medicines/base.html' %}
{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
           <div class="row">
            <div class="col-lg-4">
                {% for medi in medicineimage %}
                <div class="p-3 m-2 border" style="width:100%;">
                <img src="{{ medi.image.url }}" style="width:100%; height:100px; border-radius:10px;"class="thumbnail"/>
                  </div>
                {% endfor %}
            </div>
            <div class="col-lg-8">
                <img src="{{ medicine.image.url }}" class="card-img-top" alt="{{ medicine.name }}" id="mainImage">
            </div>
           </div>
        </div>

        <div class="col-md-6">
            <h2>{{ medicine.name }}</h2>
            <!-- <img src="{{ medicine.image.url }}" class="card-img-top" alt="{{ medicine.name }}"> -->
            <p><strong>Category:</strong> {{ medicine.category }}</p>
            <p><strong>Price:</strong> ${{ medicine.price }}</p>
            <p><strong>Stock:</strong> {{ medicine.stock }} units</p>
            <p><strong>Expiry Date:</strong> {{ medicine.expiry_date }}</p>
            <p><strong>Department:</strong> {{ medicine.department }}</p>
            <p><strong>Description:</strong> {{ medicine.description }}</p>
            <p><strong>Offer:</strong> {{ medicine.offer }}%</p>
   
            {% if medicine.is_expired %}
                <p class="text-danger"><strong>Warning:</strong> This medicine is expired!</p>
            {% endif %}

            {% if medicine.is_low_stock %}
                <p class="text-warning"><strong>Low Stock:</strong> Only {{ medicine.stock }} left!</p>
            {% endif %}
            <form method="post" action="/addtocart">
                {% csrf_token %}
                Quantity:<input type="number"  min="1" name="quantity" value="1" required>
                <button type="submit" class="btn btn-success"><i class="fa-solid fa-cart-shopping"></i></button>
            </form>
            <a href="{% url 'medicine_list' %}" class="btn btn-secondary mt-3"><i class="fa-solid fa-reply"></i></a>
        </div>
      
    </div>
    <div class="row">
        <div class="col-lg-12">
            <h1>Comments</h1>
        </div>
        <div class="col-lg-12">
            {% for comment in comments %}
              <p>
                <i class="fa-solid fa-user"></i>  {{comment.comment}}
              </p>
            {% endfor %}
        </div>
    </div>
    
</div>

<script>
        // Select all thumbnails
        const thumbnails = document.querySelectorAll('.thumbnail');
        const mainImage = document.getElementById('mainImage');

        // Loop through each thumbnail and add click event
        thumbnails.forEach(thumbnail => {
            thumbnail.addEventListener('click', function() {
                let imgSrc = this.getAttribute('src'); // Get src attribute of clicked image
                mainImage.setAttribute('src', imgSrc); // Change main image src
            });
        });
</script>
{% endblock %}
